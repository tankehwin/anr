<div class="page-header">
  <h1>Tournament Navigator</h1>
</div>

<% if notice %>
  <div class="alert alert-success">
    <button type="button" class="close" data-dismiss="alert">&times;</button>
    <%= notice %>
  </div>
<% end %>
<% if alert %>
  <div class="alert">
    <button type="button" class="close" data-dismiss="alert">&times;</button>
    <%= alert %>
  </div>
<% end %>

<%= will_paginate @players %>

<table class="table table-striped table-bordered">
  <thead>
    <tr>
      <th>Tournament Name</th>
      <th>Description</th>
      <th>Status</th>
      <th>Multiplier</th>
      <th>Action</th>
    </tr>
  </thead>
  <tbody>

    <% @tournaments.each do |tournament| %>
      <tr>
        <td><%= link_to tournament.name, tournament %></td>
        <td><%= tournament.description %></td>
        <td><%= tournament.state %></td>
        <td><%= tournament.rating_multiplier %></td>
        <td>
          <%= link_to 'Edit', edit_tournament_path(tournament), :class => 'btn btn-mini' unless tournament.state == "Tournament is closed." %>
          <%= link_to 'Delete', tournament, method: :delete, data: { confirm: 'Are you sure?' }, :class => 'btn btn-mini btn-danger' unless tournament.state == "Tournament is closed." %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>

<%= will_paginate @players %>

<%= link_to 'Add a New Tournament', '#tournaments_new', :class => 'btn btn-primary', :"data-toggle" => 'modal' %>

<div id="tournaments_new" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
    <h3 id="myModalLabel">Add a New Tournament</h3>
  </div>
  <div class="modal-body">
    <%= form_for @tournament, :html => { :class => 'form-horizontal' } do |f| %>
      <% if @tournament.errors.any? %>
        <div class="alert alert-block alert-error">
          <button type="button" class="close" data-dismiss="alert">&times;</button>
          <h2><%= pluralize(@tournament.errors.count, "error") %> prohibited this tournament from being saved:</h2>

          <ul>
          <% @tournament.errors.full_messages.each do |msg| %>
            <li><%= msg %></li>
          <% end %>
          </ul>
        </div>
      <% end %>

      <div class="control-group">
        <%= f.label :name, :class => 'control-label' %>
        <div class="controls">
          <%= f.text_field :name, :class => 'text_field' %>
        </div>
      </div>
      <div class="control-group">
        <%= f.label :description, :class => 'control-label' %>
        <div class="controls">
          <%= f.text_area :description, :class => 'text_area' %>
        </div>
      </div>
  </div>
  <div class="modal-footer">
      <%= link_to 'Close', '#', :class => 'btn', :"data-dismiss" => 'modal', :"aria-hidden" => true %>
      <%= f.submit nil, :class => 'btn btn-primary' %>
    <% end %>
  </div>
</div>

<br /><br />
